<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tranformer Designer</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.min.js"></script>
  <script src="main.js"></script>
  <link rel="stylesheet" href="main.css"></link>
</head>
<body onload="init()">
  <h1>Welcome to my Transformer Designer Page</h1>
  <h3>Applicable Toroid Transformers Only</h3>
  <table>
    <tr><th>Select Unit of Measurement</th></tr>
    <tr>
      <td>Unit of measurement</td>
      <td>
        <select id="unit" value="mm" onchange="recalc()">
          <option value="mm">mm</option>
          <option value="cm">cm</option>
          <option value="in">in</option>
        </select>
      </td>
    </tr>
    <tr><th>Iron Properties</th></tr>
    <tr>
      <td><label><div class="tooltip">Toroid's core height
        <span class="tooltiptext">Lying flat on the surface, the height of toroid is measured from bottom to top.<img src="toroid_ht.png" width="15px"></img></span>
      </div></label></td>
      <td><input type="number" id="leg" step="0.01" value=25.4 min=0.1 max=25400 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><label><div class="tooltip">Toroid's core thickness
        <span class="tooltiptext">The toroid's thicknes is measured from outer diameter to inner diameter.</span>
      </div></label></td>
      <td><input type="number" id="thick" step="0.01" value=25.4 min=0.1 max=25400 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><label><div class="tooltip">Core's iron maximum flux density (Tesla)
        <span class="tooltiptext">The maximum flux density plays an important role in the transformer.
          It specifies the limit where the iron core starts to saturate. When the core saturates, it
          becomes ineffective because it can no longer generate additional magnetic flux. Manufactuer's, 
          data specifies the maximum flux density, so use it here. With no data, it defaults to 0.6 Tesla</span>
        </div></label></td>
      <td><input type="number" id="flux" step="0.01" value=0.8 min=0.1 max=5.0 onchange="hideAnchor()"></td>
    </tr>
    <tr><th>Voltage And Frequency Specifications</th></tr>
    <tr>
      <td><label>Primary voltage (Volts)</label></td>
      <td><input type="number" id="pri-v" step="0.1" value=230 min=1 max=10000 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><label><div class="tooltip">Secondary voltage (Volts)
        <span class="tooltiptext">For dual rail center-tap secondary out, make this value times 2.</span>
        </div></label></td>
      <td><input type="number" id="sec-v" step="0.1" value=35  min=1 max=10000 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><label>Line Frequency (Hertz)</label></td>
      <td><input type="number" id="freq" value=60 min=1 max=1000000000 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><label><div class="tooltip">Wave Shape
        <span class="tooltiptext">For mains supply, the shape is sine wave. For SMPS transformer, 
          this is usually a square wave.</span>
        </div></label></td>
      <td>
        <select id="shape" value="sine" onchange="hideAnchor()">
          <option value="sine">sine wave</option>
          <option value="square">square wave</option>
        </select>
      </td>
    </tr>
    <tr><th>Stacking Factors</th></tr>
    <tr>
      <td><label><div class="tooltip">Stacking Factor (%)
        <span class="tooltiptext">For laminated core, stacking factor is the amount of gaps in 
          between the laminate stackings expressed as percentage, default is 10%. For ferrite core or 
          iron powder core, since it has no laminates, this should be 0.</span></div></label></td>
      <td><input type="number" id="stacking" value="10" min=0 max=100 onchange="hideAnchor()"></td>
    </tr>
    <tr>
      <td><button id="calc" onclick="calculate()">Calculate Winding Turns</button></td>
    </tr>
    <tr>
      <td><label>Calculated number of turns - Primary</label></td>
      <td><input type="text" id="pri-n" disabled></td>
    </tr>
    <tr>
      <td><label>Calculated number of turns - Secondary</label></td>
      <td><input type="text" id="sec-n" disabled></td>
    </tr>
    </table>  
    <a id="page2" href="#" style="display:none">Next - Calculate Wire Size</a>
</body>
</html>
